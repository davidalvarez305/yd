{% extends 'crm/base.html' %}

{% block content %}
{% if filter_form %}
  <form class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 lg:grid-cols-6 gap-4 mb-4">
    {{ filter_form.render }}
  </form>
{% endif %}

{% if show_add_button %}
<div class="flex flex-col my-6 overflow-hidden rounded-lg bg-white shadow-sm dark:bg-gray-800 dark:text-gray-100">
    <div class="flex flex-col gap-3 bg-gray-50 px-5 py-4 text-center dark:bg-gray-700/50 sm:flex-row sm:items-center sm:justify-between sm:text-left">
            <a href="{% url create_url %}"
                class="inline-flex items-center justify-center gap-2 rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm font-semibold leading-5 text-gray-800 hover:border-gray-300 hover:text-gray-900 hover:shadow-sm focus:ring focus:ring-gray-300/25 active:border-gray-200 active:shadow-none dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:border-gray-600 dark:hover:text-gray-200 dark:focus:ring-gray-600/40 dark:active:border-gray-700">
                Add
            </a>
    </div>
</div>
{% endif %}

<div class="min-w-full overflow-x-auto rounded border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-800">
    {{ table.render }}
    
    <!-- Pagination -->
    <div class="grow border-t border-gray-200 px-5 py-4 dark:border-gray-700">
        {% if is_paginated %}
        <nav class="mt-4 flex justify-center">
            <ul class="inline-flex flex-wrap items-center gap-1 text-sm">
                {% if page_obj.has_previous %}
                <li>
                    <a href="{% querystring page=1 %}" class="inline-flex items-center rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700">« First</a>
                </li>
                <li>
                    <a href="{% querystring page=page_obj.previous_page_number %}" class="inline-flex items-center rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700">‹ Prev</a>
                </li>
                {% else %}
                <li>
                    <span class="inline-flex items-center rounded-lg border border-gray-200 bg-gray-100 px-3 py-1.5 text-gray-400 dark:border-gray-700 dark:bg-gray-700 dark:text-gray-500">« First</span>
                </li>
                <li>
                    <span class="inline-flex items-center rounded-lg border border-gray-200 bg-gray-100 px-3 py-1.5 text-gray-400 dark:border-gray-700 dark:bg-gray-700 dark:text-gray-500">‹ Prev</span>
                </li>
                {% endif %}
                <li>
                <span class="inline-flex items-center rounded-lg border border-gray-300 bg-blue-50 px-3 py-1.5 font-semibold text-blue-700 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200">
                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
                </span>
                </li>
                {% if page_obj.has_next %}
                <li>
                    <a href="{% querystring page=page_obj.next_page_number %}" class="inline-flex items-center rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700">Next ›</a>
                </li>
                <li>
                    <a href="{% querystring page=page_obj.paginator.num_pages %}" class="inline-flex items-center rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700">Last »</a>
                </li>
                {% else %}
                <li>
                    <span class="inline-flex items-center rounded-lg border border-gray-200 bg-gray-100 px-3 py-1.5 text-gray-400 dark:border-gray-700 dark:bg-gray-700 dark:text-gray-500">Next ›</span>
                </li>
                <li>
                    <span class="inline-flex items-center rounded-lg border border-gray-200 bg-gray-100 px-3 py-1.5 text-gray-400 dark:border-gray-700 dark:bg-gray-700 dark:text-gray-500">Last »</span>
                </li>
                {% endif %}
            </ul>
        </nav>
        {% endif %}
    </div>
    <!-- END Pagination -->
</div>
{% endblock %}