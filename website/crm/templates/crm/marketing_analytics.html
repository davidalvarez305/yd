{% extends 'crm/base.html' %}
{% load static %}
{% load humanize %}

{% block content %}
<div class="min-w-full overflow-x-auto rounded border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-800">
    <table class="min-w-full whitespace-nowrap align-middle text-sm">
        <thead>
            <tr>
                <th class="bg-gray-100/75 px-3 py-4 text-center font-semibold text-gray-900 dark:bg-gray-700/25 dark:text-gray-50">
                    Platform
                </th>
                <th class="bg-gray-100/75 px-3 py-4 text-center font-semibold text-gray-900 dark:bg-gray-700/25 dark:text-gray-50">
                    Spend
                </th>
                <th class="bg-gray-100/75 px-3 py-4 text-center font-semibold text-gray-900 dark:bg-gray-700/25 dark:text-gray-50">
                    Leads
                </th>
                <th class="bg-gray-100/75 px-3 py-4 text-center font-semibold text-gray-900 dark:bg-gray-700/25 dark:text-gray-50">
                    Events
                </th>
                <th class="bg-gray-100/75 px-3 py-4 text-center font-semibold text-gray-900 dark:bg-gray-700/25 dark:text-gray-50">
                    Revenue
                </th>
                <th class="bg-gray-100/75 px-3 py-4 text-center font-semibold text-gray-900 dark:bg-gray-700/25 dark:text-gray-50">
                    ROAS
                </th>
                <th class="bg-gray-100/75 px-3 py-4 text-center font-semibold text-gray-900 dark:bg-gray-700/25 dark:text-gray-50">
                    CPA
                </th>
                <th class="bg-gray-100/75 px-3 py-4 text-center font-semibold text-gray-900 dark:bg-gray-700/25 dark:text-gray-50">
                    AOV
                </th>
                <th class="bg-gray-100/75 px-3 py-4 text-center font-semibold text-gray-900 dark:bg-gray-700/25 dark:text-gray-50">
                    CPL
                </th>
                <th class="bg-gray-100/75 px-3 py-4 text-center font-semibold text-gray-900 dark:bg-gray-700/25 dark:text-gray-50">
                    Closing %
                </th>
            </tr>
        </thead>
        <tbody>
            <!-- Google Row -->
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-900/50">
                <td class="p-3 text-center">
                    <p class="font-medium">Google</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">${{ google_ad_spend|default:0|floatformat:2|intcomma }}</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">{{ google_count }}</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">{{ google_event_count }}</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">${{ google_revenue|default:0|floatformat:2|intcomma }}</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">{{ google_roas|default:0|floatformat:2 }}</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">${{ google_cpa|default:0|floatformat:2|intcomma }}</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">${{ google_aov|default:0|floatformat:2|intcomma }}</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">${{ google_cpl|default:0|floatformat:2|intcomma }}</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">{{ google_closing_percent|default:0|floatformat:2 }}%</p>
                </td>
            </tr>

            <!-- Facebook Row -->
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-900/50">
                <td class="p-3 text-center">
                    <p class="font-medium">Facebook</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">${{ facebook_ad_spend|default:0|floatformat:2|intcomma }}</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">{{ facebook_count }}</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">{{ facebook_event_count }}</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">${{ facebook_revenue|default:0|floatformat:2|intcomma }}</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">{{ facebook_roas|default:0|floatformat:2 }}</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">${{ facebook_cpa|default:0|floatformat:2|intcomma }}</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">${{ facebook_aov|default:0|floatformat:2|intcomma }}</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">${{ facebook_cpl|default:0|floatformat:2|intcomma }}</p>
                </td>
                <td class="p-3 text-center">
                    <p class="font-medium">{{ facebook_closing_percent|default:0|floatformat:2 }}%</p>
                </td>
            </tr>
        </tbody>
    </table>
</div>
{% endblock %}